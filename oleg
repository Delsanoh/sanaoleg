import telebot;
oleg = telebot.TeleBot('6745206237:AAFfiDdIq9HLjLG3Yhz0p_37H2naSrUpeWE')
@oleg.message_handler(content_types=['text'])
def get_text_messages(message):
    if message.text=='/start':
        oleg.send_message(message.from_user.id, 'Здравия желаю... Путник интернета? Так ведь обращался к Вам Доктор в пиар посте? А впрочем, какая разница. Я могу обращаться к Вам так, как пожелаю сам.\n\nПосему, многоуважаемый/ая, давайте я продолжу с Вами. Я здесь сижу, чтобы даровать Вам посильную помощь. Если Вы пользуетесь мной не впервые, то я закончу. Ах, а ежели Вы ранее ко мне не заходили, то позвольте, позвольте же мне посоветовать вам использовать команду ^помощь.\n\nДа-да, все команды во мне работают через _префикс_ "^".', parse_mode='Markdown')
    elif message.text=='^инфо':
        oleg.send_message(message.from_user.id,'Сейчас я дарую Вам необходимую ссылку...')
        s='[Просмотрите инфо](https://t.me/infoutwop)'
        oleg.send_message(message.chat.id, s, parse_mode='MarkdownV2')
        oleg.register_next_step_handler(message, get_text_messages)
    elif message.text=='^база':
        oleg.send_message(message.from_user.id, 'Сейчас частые вопросы... Таковы.\n\nМогу ли я вступить за мифическое существо в ролевую?\n_-Нет, Вы не можете вступить за Ырку, кота Баюна или других... Но Вы вполне можете стать русалкой или кикиморой! Проще говоря, у нас в рп разрешены человекоподобные мифические расы и каноничные расы игры, кроме богов._\n\nКакой период времени в ролевой?\n_-Относительная ориентация идёт на период 20-го века._\n\nВ каком месте раполагается деревушка? Как насчёт мира? Это Тейват?\n_-Нет, мы ролим без использования каноничных локаций. Также мир является альтернативным реальному, но не им самим. Есть аналоги народов и стран, но полностью игнорируются настоящие исторические события._',  parse_mode='Markdown')
        oleg.register_next_step_handler(message, get_text_messages)
    elif message.text=='^помощь':
        oleg.send_message(message.from_user.id, 'Ах, дорогой/ая! Я буду крайне, крайне рад помочь Вам. Вот список моих команд:\n\n_^анкета_ - команда позволяет мне принять Вашу славную анкету для дальнейшего приёма Вас в ролевой проект!\n\n_^помощь_ - мне кажется, что у меня дежавю, но в любом случае... Эта команда позволяет Вам сиюминутно получить мою помощь по интересующим Вас вопросам!\n\n_^инфо_ - дарует Вашей прелестной персоне ссылку на информационный канал ролевой, ежели Вы посмели огорчить Доктора тем, что не ознакомились с ним или почему-то потеряли ссылку.\n\n_^база_ - перенаправляет Вас на базу часто задаваемых вопросов вступающих, которая регулярно пополняется.\n\nНадеюсь, что я смог удовлетворить Ваши пожелания.',  parse_mode='Markdown')
        oleg.register_next_step_handler(message, get_text_messages)
    elif message.text=='^анкета':
        oleg.send_message(message.from_user.id, 'Включаю режим приёма анкеты... Но перед тем, как отправлять её, я бы попросил Вас ознакомиться с методами работы со мной по этой функции. Я могу принимать для анкеты такие виды файлов, как изображения и текст. Ваша анкета может быть длиннее одного сообщения, поэтому, когда Вы закончите мне её отправлять, используйте команду _^стоп анкета_, чтобы я завершил приём. Вы можете оправлять анкету неограниченное количество раз, но каждый раз вам придётся прописать команду ^анкета вновь.\n\nОчень важно для моей работы и то, чтобы Вы отправляли анкету _строго по одному сообщению за раз_, а не множественной пересылкой. К сожалению, мой сервер не успевает обработать столь быстрый поток, и если Ваша анкета слишком длинная, но Вы отправляете мне её не по одному сообщению, то Доктор может просто-напросто не увидеть некоторую её часть.\n\nТакже Вы должны пересылать изображения отдельно по одному, а не группой. При отправке анкеты изображения также отправляются _отдельно от текста_.', parse_mode='Markdown')
        oleg.register_next_step_handler(message, nkt)
    else:
        oleg.send_message(message.from_user.id,'Простите, я умею исполнять только заданные мне функции. Используйте ^помощь.')
        oleg.register_next_step_handler(message, get_text_messages)
def nkt(message):
            if message.content_type=='photo':
                fileID = message.photo[-1].file_id
                file_info = oleg.get_file(fileID)
                downloaded_file = oleg.download_file(file_info.file_path)
                with open("image.jpg", 'wb') as new_file:
                    new_file.write(downloaded_file)
                ph = open('image.jpg', 'rb')
                oleg.send_photo('5261124124', ph)
                ph.close()
                oleg.register_next_step_handler(message, nkt)
            elif message.text=='^стоп анкета':
                oleg.send_message(message.from_user.id,'Ваша анкета успешно принята!\n\nПокидаю режим приёма...')
                oleg.register_next_step_handler(message, get_text_messages)
            else:
                oleg.forward_message('5261124124', message.chat.id, message.message_id)
                oleg.register_next_step_handler(message, nkt)

oleg.polling(none_stop=True,interval=0)

